<!DOCTYPE HTML>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="177.im,177,听风行,blog,博客" />
    <meta name="generator" content="Maverick 1.0" />
    <meta name="template" content="Galileo" />
    <link rel="alternate" type="application/rss+xml" title="177博客 &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="177博客 &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/galileo-ec40839efa.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/ExSearch/ExSearch-182e5a8868.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/bd3d7333876a548942f9e745e30220ee.json"
        }
    </script>
    
<title>Java面试题-Redis - 177博客</title>
<meta name="author" content="177" />
<meta name="description" content="Java面试题-Redis-收集整理" />
<meta property="og:title" content="Java面试题-Redis - 177博客" />
<meta property="og:description" content="Java面试题-Redis-收集整理" />
<meta property="og:site_name" content="177博客" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/java-interview-redis/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2020-01-15T12:00:00-00.00" />
<meta name="twitter:title" content="Java面试题-Redis - 177博客" />
<meta name="twitter:description" content="Java面试题-Redis-收集整理" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
<link rel="dns-prefetch" href="//blog.177.im" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/brand_font/embed.css" />
<style>.brand{font-family:FZCuJinLFW,serif;font-weight: normal!important;}</style>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico">
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico" color="#505050">
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico">
<meta name="application-name" content="177">
<meta name="apple-mobile-web-app-title" content="177">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#000000">
<meta name="baidu-site-verification" content="" />

    </head>
    
    <body>
        
            <div id="bg" style="background-image: url(https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/bg/The_Great_Wave_off_Kanagawa.jpg)"></div>
        
        <div class="container">
            <header id="ga-header">
                <div first>
                    <aside id="ga-logo">
                        <a href="/" target="_self">
                            <img src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/favicon.ico" alt="177博客">
                        </a>
                    </aside>
                    <aside id="ga-brand">
                        <h1 class="brand"><a class="no-style" href="/">177博客</a></h1>
                        <p>天青色等烟雨</p>
                    </aside>
                </div>
                <div second id="ga-nav">
                    <nav class="navs">
                        <ul><li><a class="ga-highlight" href="/" target="_self">首页</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/archives/" target="_self">归档</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/links/" target="_self">友链</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/about/" target="_self">关于</a></li><span class="separator">·</span><li><a href="#" target="_self" class="search-form-input ga-highlight">搜索</a></li></ul>
                    </nav>
                    <nav class="social-links">
                        <ul><li><a class="no-style" title="Twitter" href="https://twitter.com/tingfengxing" target="_blank"><i class="gi gi-twitter"></i>Twitter</a></li><span class="separator">·</span><li><a class="no-style" title="GitHub" href="https://github.com/yuolvv" target="_blank"><i class="gi gi-github"></i>GitHub</a></li><span class="separator">·</span><li><a class="no-style" title="Weibo" href="https://weibo.com/test2020/" target="_blank"><i class="gi gi-weibo"></i>Weibo</a></li></ul>
                    </nav>
                </div>
            </header>
            <div class="wrapper">
                
<main>    
    <section class="ga-section ga-content">
        <article class="yue">
            <h1 class="ga-post_title">Java面试题-Redis</h1>
            <span class="ga-post_meta ga-mono">
                <span>177</span>
                <time>
                    2020-01-15
                </time>
                
                in <a no-style class="category" href="/category/极客/">
                    极客
                </a>
                
                
            </span>
            <div class="ga-content_body">
                <div class="notice">从网络上收集整理的Java面试题，如有侵权，请联系删除！</div><h2>1. Redis 是什么？都有哪些使用场景？</h2>
<p>我们先来理解经典的CAP理论：</p>
<p>一致性：是指从数据层面来看的一致性。</p>
<p>可用性：是指从系统层面的可用性。</p>
<p>容错性：是指从网络层面的的容错性。</p>
<p>数据库逐渐从关系数据库向不同领域不同层次分化。随着读多写少场景的出现，导致需要读取数据的时间变慢，为了提升性能，出现了数据库缓存技术，对数据库的读取进行分离。web2.0时代，网民的生产力大增，存储总量也在增加，目前还是读多写少模式，原有的缓存技术显然不能满足写的压力，所以，出现了分库分表，实现读写分离。其中比较常用的一种缓存技术是用Redis做缓存。</p>
<p>Redis是什么？</p>
<p>Redis是一个基于内存且支持持久化的key-value的NoSQL数据库，其中每个key和value都是使用对象表示的，具有以以下特征：多样数据类型、持久化、主从同步。</p>
<p>和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)和zset(有序集合)。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。</p>
<p>在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的使用RDB快照的方式，把更新的数据写入磁盘或者使用类似MySQL的AOF日志方式把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。Redis支持将数据同步到多台从数据库上，这种特性对提高读取性能非常有益。</p>
<p>Redis3.0版本允许单点故障，它没有中心节点，各个节点地位一样，扩展性很好，节点间的采用二进制通信，节点与客户端采用ascII协议通信。</p>
<p>综上所述，Redis可用于缓存、数据库、消息中间件。</p>
<p>Redis 使用场景：</p>
<p>记录帖子点赞数、点击数、评论数；</p>
<p>缓存近期热帖；</p>
<p>缓存文章详情信息；</p>
<p>记录用户会话信息。</p>
<h2>2. Redis 有哪些功能？</h2>
<p>数据缓存功能</p>
<p>分布式锁的功能</p>
<p>支持数据持久化</p>
<p>支持事务</p>
<p>支持消息队列</p>
<h2>3. Redis 和 memcache 有什么区别？</h2>
<p>存储方式不同：memcache 把数据全部存在内存之中，断电后会挂掉，数据不能超过内存大小；Redis 有部份存在硬盘上，这样能保证数据的持久性。</p>
<p>数据支持类型：memcache 对数据类型支持相对简单；Redis 有复杂的数据类型。</p>
<p>使用底层模型不同：它们之间底层实现方式，以及与客户端之间通信的应用协议不一样，Redis 自己构建了 vm 机制，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求。</p>
<p>value 值大小不同：Redis 最大可以达到 1gb；memcache 只有 1mb。</p>
<h2>4. Redis 为什么是单线程的？</h2>
<p>因为 cpu 不是 Redis 的瓶颈，Redis 的瓶颈最有可能是机器内存或者网络带宽。既然单线程容易实现，而且 cpu 又不会成为瓶颈，那就顺理成章地采用单线程的方案了。</p>
<p>关于 Redis 的性能，官方网站也有，普通笔记本轻松处理每秒几十万的请求。</p>
<p>而且单线程并不代表就慢 nginx 和 nodejs 也都是高性能单线程的代表。</p>
<h2>5. 什么是缓存穿透？怎么解决？</h2>
<p>缓存穿透：指查询一个一定不存在的数据，由于缓存是不命中时需要从数据库查询，查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，造成缓存穿透。</p>
<p>解决方案：最简单粗暴的方法如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们就把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。</p>
<h2>6. Redis 支持的数据类型有哪些？</h2>
<p>Redis 支持的数据类型：string（字符串）、list（列表）、hash（字典）、set（集合）、zset（有序集合）。</p>
<h2>7. Redis 支持的 Java 客户端都有哪些？</h2>
<p>支持的 Java 客户端有 Redisson、jedis、lettuce 等。</p>
<h2>8. jedis 和 Redisson 有哪些区别？</h2>
<p>jedis：提供了比较全面的 Redis 命令的支持。</p>
<p>Redisson：实现了分布式和可扩展的 Java 数据结构，与 jedis 相比 Redisson 的功能相对简单，不支持排序、事务、管道、分区等 Redis 特性。</p>
<h2>9. 怎么保证缓存和数据库数据的一致性？</h2>
<p>合理设置缓存的过期时间。</p>
<p>新增、更改、删除数据库操作时同步更新 Redis，可以使用事物机制来保证数据的一致性。</p>
<h2>10. Redis 持久化有几种方式？</h2>
<p>Redis 的持久化有两种方式，或者说有两种策略：</p>
<p>RDB（Redis Database）：指定的时间间隔能对你的数据进行快照存储。</p>
<p>AOF（Append Only File）：每一个收到的写命令都通过write函数追加到文件中。</p>
<h2>11. Redis 怎么实现分布式锁？</h2>
<p>Redis 分布式锁其实就是在系统里面占一个“坑”，其他程序也要占“坑”的时候，占用成功了就可以继续执行，失败了就只能放弃或稍后重试。</p>
<p>占坑一般使用 setnx(set if not exists)指令，只允许被一个程序占有，使用完调用 del 释放锁。</p>
<h2>12. Redis 分布式锁有什么缺陷？</h2>
<p>Redis 分布式锁不能解决超时的问题，分布式锁有一个超时时间，程序的执行如果超出了锁的超时时间就会出现问题。</p>
<h2>13. Redis 如何做内存优化？</h2>
<p>尽量使用 Redis 的散列表，把相关的信息放到散列表里面存储，而不是把每个字段单独存储，这样可以有效的减少内存使用。比如将 Web 系统的用户对象，应该放到散列表里面再整体存储到 Redis，而不是把用户的姓名、年龄、密码、邮箱等字段分别设置 key 进行存储。</p>
<h2>14. Redis 淘汰策略有哪些？</h2>
<p>volatile-lru：从已设置过期时间的数据集（server. db[i]. expires）中挑选最近最少使用的数据淘汰。</p>
<p>volatile-ttl：从已设置过期时间的数据集（server. db[i]. expires）中挑选将要过期的数据淘汰。</p>
<p>volatile-random：从已设置过期时间的数据集（server. db[i]. expires）中任意选择数据淘汰。</p>
<p>allkeys-lru：从数据集（server. db[i]. dict）中挑选最近最少使用的数据淘汰。</p>
<p>allkeys-random：从数据集（server. db[i]. dict）中任意选择数据淘汰。</p>
<p>no-enviction（驱逐）：禁止驱逐数据。</p>
<h2>15. Redis 常见的性能问题有哪些？该如何解决？</h2>
<p>主服务器写内存快照，会阻塞主线程的工作，当快照比较大时对性能影响是非常大的，会间断性暂停服务，所以主服务器最好不要写内存快照。</p>
<p>Redis 主从复制的性能问题，为了主从复制的速度和连接的稳定性，主从库最好在同一个局域网内。</p>

            </div>
        </article>
        <div id="ga-tags">
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/Java/">#Java</a>
    </span>
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/面试题/">#面试题</a>
    </span>
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/IT/">#IT</a>
    </span>
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/Redis/">#Redis</a>
    </span>
    
</div>
    </section>

    
<section id="ga-content_pager">

    <div class="next">
        <a class="ga-highlight" href="/archives/java-interview-mysql/">Java面试题-MySQL</a>
        <p class="yue">Java面试题-MySQL-收集整理</p>
    </div>


    <div class="prev">
        <a class="ga-highlight" href="/archives/java-interview-jvm/">Java面试题-JVM</a>
        <p class="yue">Java面试题-JVM收集整理</p>
    </div>

</section>


    

</main>

                <footer class="ga-mono" id="ga-footer">
                    <section>
                        <span id="ga-uptime"></span>
                        <span class="brand">177博客</span>
                    </section>
                    <section>
                        <p class="copyright">
                            <span>Copyright © 2015~2020 177</span>
                            <span>Powered by <a no-style href="https://177.im" target="_blank">177</a></span>
                        </p>
                        <div class="copyright">
                            <span class="footer-addon">
                                
Whatever will be, Will be.

                            </span>
                            <!-- <nav class="social-links">
                                <ul><li><a class="no-style" title="Twitter" href="https://twitter.com/tingfengxing" target="_blank"><i class="gi gi-twitter"></i>Twitter</a></li><span class="separator">·</span><li><a class="no-style" title="GitHub" href="https://github.com/yuolvv" target="_blank"><i class="gi gi-github"></i>GitHub</a></li><span class="separator">·</span><li><a class="no-style" title="Weibo" href="https://weibo.com/test2020/" target="_blank"><i class="gi gi-weibo"></i>Weibo</a></li></ul>
                            </nav> -->
                        </div>
                    </section>
                    <script>
                        var site_build_date = "2020-01-01T00:00+08:00"
                    </script>
                    <script src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/galileo-d8a0a06eff.js"></script>
                </footer>
            </div>
        </div>
    </div>
        
        
        <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="pswp__bg"></div>
        <div class="pswp__scroll-wrap">
            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>
            <div class="pswp__ui pswp__ui--hidden">
                <div class="pswp__top-bar">
                    <div class="pswp__counter"></div>
                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                    <button class="pswp__button pswp__button--share" title="Share"></button>
                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                          <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                          </div>
                        </div>
                    </div>
                </div>
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div> 
                </div>
                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
                </button>
                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
                </button>
                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/ExSearch/ExSearch-493cb9cd89.js"></script>
    
    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/katex.min.js"></script>
    <script>
    mathOpts = {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "\\[", right: "\\]", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false}
        ]
    };
    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/yuolvv/blog.177.im@gh-pages/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
<script>
if(window.location.hash){
    var checkExist = setInterval(function() {
       if ($(window.location.hash).length) {
          $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
          clearInterval(checkExist);
       }
    }, 100);
}
</script>
<script>
if(window.navigator && navigator.serviceWorker) {
  caches.keys().then(function(cacheNames) {
    cacheNames.forEach(function(cacheName) {
      caches.delete(cacheName);
    });
  }).then(function(){
    console.log('Cache cleaned.');
  });
  navigator.serviceWorker.getRegistrations()
  .then(function(registrations) {
    for(let registration of registrations) {
      registration.unregister();
    }
  }).then(function(){
    console.log('Service Worker stopped.');
  });
}
</script>

    </body>
</html>